{"id":"navisai-0f0","content_hash":"57e271407a12f43f8aa3d0c90001ebb07a70894c3a55f5cabccd07fef6cf7899","title":"Implement authentication middleware for protected endpoints","description":"Currently auth middleware is added globally but endpoints marked auth-required are not actually protected. The auth middleware needs to be applied selectively to protect only specific endpoints.\n\nüìã Governing Documentation:\n- docs/AUTH_MODEL.md v0.1 - Section 2: Authentication Flow\n- docs/SECURITY.md v0.2 - Section 3: Endpoint Protection\n\nThis implements proper endpoint protection for:\n- /projects/* endpoints\n- /sessions/* endpoints  \n- /approvals/* endpoints\n- /devices/* endpoints\n- /discovery/* endpoints\n\nRefs: navisai-000","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T23:07:22.665674-08:00","updated_at":"2025-12-16T23:32:55.207557-08:00","closed_at":"2025-12-16T23:32:55.207583-08:00","source_repo":"."}
{"id":"navisai-1bl","content_hash":"c1396d882f4352b7698656ea9796cc3b9d936122b8bbc72b69bc1a267bfc15bf","title":"Implement transparent HTTPS proxy core with TLS SNI inspection","description":"Implement the core transparent HTTPS proxy that can intercept port 443 traffic, inspect TLS SNI during handshake, and route based on domain names.\n\nüìã Governing Documentation:\n- docs/DOMAIN_BASED_FORWARDING_DESIGN.md v0.1 - Sections 'Technical Implementation' and 'Architecture'\n\nCore Components:\n1. TransparentHTTPSProxy class with connection handling\n2. SNI extraction from TLS Client Hello packets\n3. Routing logic for navis.local vs other domains\n4. pfctl rules to redirect port 443 to proxy\n5. Basic connection relay between client and destinations\n\nTechnical Requirements:\n- Intercept all port 443 traffic via pfctl\n- Parse TLS Client Hello to extract SNI without breaking handshake\n- Route navis.local to 127.0.0.1:47621\n- Route other traffic to original destinations\n- Maintain end-to-end encryption\n- Handle concurrent connections efficiently\n\nAcceptance Criteria:\n- Proxy binds to port 8443 and receives redirected traffic\n- Can extract SNI from TLS handshake correctly\n- Routes navis.local to NavisAI daemon\n- Routes other domains to original destinations\n- Passes basic connectivity tests\n\nDependencies:\n- This is Phase 1 of navisai-a1p\n- Must integrate with existing daemon architecture\n\nBlocked By: None\nBlocks: navisai-a1p-b (dev server detection)","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-16T21:33:09.798905-08:00","updated_at":"2025-12-16T21:53:39.134956-08:00","closed_at":"2025-12-16T21:53:39.134975-08:00","source_repo":".","labels":["proxy,https,networking,core"],"dependencies":[{"issue_id":"navisai-1bl","depends_on_id":"navisai-a1p","type":"parent-child","created_at":"2025-12-16T21:33:16.607963-08:00","created_by":"daemon"}]}
{"id":"navisai-1ig","content_hash":"002607b5f93ca49e14a93c9dfc3f91bfdb482d18fec9e3d2a15821a54f136f56","title":"daemon-logs: Implement log rotation for daemon logs","description":"To support long-running daemon processes and prevent disk space issues, implement log rotation for daemon logs.\n\n**Requirements:**\n1. Implement log rotation in daemon based on file size (e.g., 10MB)\n2. Keep configurable number of log files (e.g., 5 files)\n3. Compress old log files to save space\n4. Add log levels (DEBUG, INFO, WARN, ERROR)\n5. Timestamp all log entries\n6. Ensure structured logging format for better parsing\n\n**Acceptance Criteria:**\n- [ ] Logs rotate when reaching size limit\n- [ ] Old logs are compressed (.gz extension)\n- [ ] Configurable number of retained logs\n- [ ] Log levels are respected in output\n- [ ] No log data loss during rotation\n- [ ] Works with the logs command streaming","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T15:58:56.925882-08:00","updated_at":"2025-12-16T15:58:56.925882-08:00","source_repo":".","labels":["daemon","infrastructure","logging"]}
{"id":"navisai-1l7","content_hash":"ed7cee75e8e6e3bcd39359e65f716bcf8c799fb71f36d5c138bc2cd8ca35afab","title":"Performance optimization and comprehensive testing","description":"Optimize the transparent proxy system for production performance and create comprehensive test coverage to ensure reliability and minimal overhead.\n\nüìã Governing Documentation:\n- docs/DOMAIN_BASED_FORWARDING_DESIGN.md v0.1 - Sections 'Performance Considerations' and 'Testing Strategy'\n\nPerformance Optimizations:\n1. Connection pooling for frequently accessed destinations\n2. DNS resolution caching with intelligent TTL\n3. Zero-copy data relay using Node.js streams\n4. Certificate caching with memory-efficient storage\n5. Selective TLS interception (skip HTTP/1.1 upgrades)\n6. CPU and memory usage optimization\n\nTarget Benchmarks:\n- Latency overhead: \u003c 5ms per connection\n- Throughput: \u003e 500 Mbps sustained\n- Memory usage: \u003c 50MB at idle\n- CPU usage: \u003c 2% when idle, \u003c 10% under load\n- Concurrent connections: Support 1000+ active\n\nTest Coverage Requirements:\n1. Unit tests for all core components (90%+ coverage)\n2. Integration tests for end-to-end proxy flow\n3. Performance tests with realistic workloads\n4. Security tests for certificate handling\n5. Compatibility tests across macOS versions\n6. Stress tests for connection limits\n\nTest Categories:\n- SNI extraction accuracy\n- Routing logic verification\n- Certificate generation and validation\n- Connection pooling efficiency\n- Memory leak detection\n- Concurrent connection handling\n- Error recovery scenarios\n- Security boundary validation\n\nMonitoring Integration:\n- Prometheus metrics for performance tracking\n- Health check endpoints for monitoring\n- Structured logging for troubleshooting\n- Performance profiling hooks\n- Alert thresholds for critical metrics\n\nAcceptance Criteria:\n- Meets all performance benchmarks\n- Passes 90%+ test coverage\n- Handles 1000+ concurrent connections\n- No memory leaks after 24h stress test\n- Graceful degradation under high load\n- Comprehensive documentation for troubleshooting\n\nDependencies:\n- Requires all previous phases to be complete\n- Final integration task for navisai-a1p\n\nBlocked By: navisai-a1p-a, navisai-a1p-b, navisai-a1p-c\nBlocks: None (completes navisai-a1p)","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-16T21:34:14.072038-08:00","updated_at":"2025-12-16T21:34:14.072038-08:00","source_repo":".","labels":["performance,testing,optimization,benchmarks"],"dependencies":[{"issue_id":"navisai-1l7","depends_on_id":"navisai-a1p","type":"parent-child","created_at":"2025-12-16T21:34:25.956397-08:00","created_by":"daemon"},{"issue_id":"navisai-1l7","depends_on_id":"navisai-snw","type":"blocks","created_at":"2025-12-16T21:34:26.779368-08:00","created_by":"daemon"}]}
{"id":"navisai-1t1","content_hash":"709f1107373f9b2707535ac9690c1d2f9718e254cd928722691f1febaf0f7b00","title":"Update DOMAIN_BASED_FORWARDING_DESIGN.md to document macOS pf limitations","description":"\nüìã Governing Documentation:\n- docs/DOMAIN_BASED_FORWARDING_DESIGN.md v0.1 - Technical design reference\n- docs/NETWORKING.md v0.2 - Main networking documentation\n\nISSUE: macOS pf rdr rules don't redirect traffic originating from localhost (same machine)\nCurrent design doesn't mention this known limitation.\n\nCURRENT BEHAVIOR:\n‚úÖ External LAN devices can access navis.local via packet forwarding\n‚úÖ Transparent proxy inspects TLS SNI for domain-based routing\n‚ùå curl https://navis.local from localhost fails (pf doesn't rdr local traffic)\n‚ùå This causes confusion for developers testing locally\n\nDOCUMENTATION NEEDED:\n1. Add 'Known Limitations' section covering macOS pf behavior\n2. Document that packet forwarding only works for external LAN clients\n3. Explain why localhost connections bypass pf\n4. Reference Beads issue navisai-5zu for workaround details\n5. Note this is expected behavior, not a bug\n\nACCEPTANCE CRITERIA:\n‚úÖ Design doc updated with macOS limitations section\n‚úÖ Clarifies packet forwarding scope (LAN vs localhost)\n‚úÖ Links to related Beads issues\n‚úÖ Provides troubleshooting guidance\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T00:29:42.803883-08:00","updated_at":"2025-12-17T00:29:42.803883-08:00","source_repo":"."}
{"id":"navisai-211","content_hash":"6403a0410ab240cb1b20113e721602781bac04cc24e994e2e30d4fca51457061","title":"Configure CORS per IPC_TRANSPORT.md specifications","description":"IPC_TRANSPORT.md documents CORS rules but they're not implemented in daemon.js. Need to configure Fastify CORS plugin to match documented rules for local development and LAN access.\n\nGoverning docs:\n- docs/IPC_TRANSPORT.md (CORS specifications)\n- docs/NETWORKING.md (LAN access requirements)\n\nDocumented CORS rules not implemented:\n- Local development CORS settings\n- LAN access CORS configuration\n- Allowed origins for navis.local\n- Header policies and restrictions\n\nImplementation requirements:\n1. Install and configure @fastify/cors plugin\n2. Implement CORS settings matching IPC_TRANSPORT.md\n3. Add environment-specific CORS rules (dev vs LAN)\n4. Test CORS configuration with browser clients\n5. Verify navis.local origin handling\n6. Add CORS tests for validation\n\nThis is prerequisite for proper PWA operation and LAN client access.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T17:46:10.252786-08:00","updated_at":"2025-12-16T18:47:02.376205-08:00","closed_at":"2025-12-16T18:47:02.376229-08:00","source_repo":".","labels":["api,daemon,cors,networking"],"dependencies":[{"issue_id":"navisai-211","depends_on_id":"navisai-3yz","type":"related","created_at":"2025-12-16T17:46:27.371092-08:00","created_by":"daemon"}]}
{"id":"navisai-22h","content_hash":"22786608c09fc7e89ea643d6733105f43d1230ec5229c7d808ecdf1d05f04245","title":"Set up Beads integration for NavisAI","description":"Configure Beads with proper labels, templates, and workflow integration per AGENTS.md Section 13. Ensure all agents can use Beads for task tracking and coordination.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-16T14:39:18.068166-08:00","updated_at":"2025-12-16T18:49:18.28465-08:00","closed_at":"2025-12-16T18:49:18.284688-08:00","source_repo":".","labels":["integration,workflow,docs"]}
{"id":"navisai-2dq","content_hash":"b81a188259442320f9b198fe463d0f2402a33998eff8bc20ae5ddbd39441703c","title":"Test all CLI shims functionality","description":"Comprehensive test of all NavisAI CLI commands\n\nüìã Governing Documentation:\n- docs/SETUP.md - CLI command reference\n- docs/ONBOARDING_FLOW.md - User interaction flows\n\nCLI Commands to Test:\n1. ./navisai up - Start daemon\n2. ./navisai down - Stop daemon\n3. ./navisai status - Check daemon status\n4. ./navisai doctor - Run diagnostics (already enhanced)\n5. ./navisai cleanup --bridge-only - Clean packet forwarding\n6. ./navisai logs - View daemon logs\n7. ./navisai index - Project indexing\n8. ./navisai pair - Device pairing","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-17T12:26:09.508645-08:00","updated_at":"2025-12-17T12:26:09.508645-08:00","source_repo":".","labels":["cli,testing,automation"],"dependencies":[{"issue_id":"navisai-2dq","depends_on_id":"navisai-vvi","type":"blocks","created_at":"2025-12-17T12:26:14.434179-08:00","created_by":"daemon"}]}
{"id":"navisai-2vs","content_hash":"452e34be9e8d94bab14d999d2797fc4c25c5ad2babba844795af58c270c43436","title":"Fix doctor to check correct pf anchor for NAT rules","description":"\nüìã Governing Documentation:\n- docs/NETWORKING.md v0.2 - Packet forwarding implementation\n- AGENTS.md - Diagnostic tool accuracy\n\nISSUE: Doctor checks for NAT rules in navisai anchor but they're in navisai/proxy\n\nREQUIREMENT: Doctor must accurately check packet forwarding status\n\nAcceptance Criteria:\n‚úÖ Doctor checks navisai/proxy anchor for NAT rules\n‚úÖ Doctor correctly detects when packet forwarding is configured\n‚úÖ Doctor provides accurate status report\n","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T00:11:09.71022-08:00","updated_at":"2025-12-17T00:11:32.961477-08:00","closed_at":"2025-12-17T00:11:32.961477-08:00","source_repo":"."}
{"id":"navisai-3c3","content_hash":"9b04af1ee0a7b5db05fd61bfb7699d60c465a9617561e9133c27e915fe28375c","title":"Complete implementation of index and pair CLI commands","description":"üìã Governing Documentation:\n- docs/NETWORKING.md v0.3 - Section 5 'Project Discovery'\n- docs/PAIRING_PROTOCOL.md - Device pairing workflow\n\nISSUE: The index and pair commands in the CLI are partially implemented but may not have full error handling or complete feature set.\n\nAcceptance Criteria:\n‚úÖ  command works correctly for project indexing\n‚úÖ  command implements full device pairing workflow\n‚úÖ Both commands handle errors gracefully\n‚úÖ Progress indicators show for long-running operations\n‚úÖ Pairing includes QR code generation and status monitoring\n‚úÖ Integration with daemon APIs is complete and tested","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-16T19:45:16.835885-08:00","updated_at":"2025-12-16T19:45:16.835885-08:00","source_repo":".","labels":["cli,index,pairing,high-priority"]}
{"id":"navisai-3yz","content_hash":"d7c8a5e3b1a6aa4c79352a6f6c2b66856c078947b416d67502bc710dbc035125","title":"Implement missing security middleware (helmet, cors, rate limiting)","description":"Security evaluation revealed missing security middleware. IPC_TRANSPORT.md specifies CORS rules but no implementation found. Need to add helmet.js for security headers, proper CORS configuration, and rate limiting to protect endpoints. This is critical for production security.\n\nGoverning docs:\n- docs/SECURITY.md (security requirements)\n- docs/IPC_TRANSPORT.md (CORS specifications)\n\nCritical security gaps identified:\n1. No helmet.js implementation for security headers\n2. CORS rules documented but not implemented in daemon.js\n3. No rate limiting protection for endpoints\n4. Missing security middleware stack\n\nImplementation scope:\n- Add helmet.js with appropriate configuration\n- Configure Fastify CORS plugin per IPC_TRANSPORT.md\n- Implement rate limiting for API endpoints\n- Add security tests to verify hardening","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T17:45:51.862605-08:00","updated_at":"2025-12-16T18:11:58.795411-08:00","closed_at":"2025-12-16T18:11:58.795411-08:00","source_repo":".","labels":["security,daemon,api"]}
{"id":"navisai-40g","content_hash":"c725834721b74947e20996ace081b8c70a7187c1df981130c1fee4d361a6f14c","title":"Implement CLI log streaming command","description":"üìã Governing Documentation:\n- docs/NETWORKING.md v0.3 - Section 5.1 'Log Streaming'\n- docs/IPC_TRANSPORT.md v0.1 - Section 3.4 'Real-time Communication'\n\nISSUE: CLI logs command currently shows 'not implemented'. Need to connect to daemon's log stream endpoint.\n\nAcceptance Criteria:\n‚úÖ  shows real-time log output with proper formatting\n‚úÖ Command accepts filtering options: -l (level), -t (timestamp), -v (verbose)\n‚úÖ Graceful handling of Ctrl+C to stop streaming\n‚úÖ Handles connection errors and retries\n‚úÖ Follows both Server-Sent Events and WebSocket for fallback\n‚úÖ Works with self-signed certificates for local development","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-16T19:43:37.698047-08:00","updated_at":"2025-12-16T19:44:37.54513-08:00","closed_at":"2025-12-16T19:44:37.54513-08:00","source_repo":".","labels":["cli,logging,daemon"]}
{"id":"navisai-4e2","content_hash":"d486d38a4eaddf7100bed7e073c43b338c3f7d5c8757f55fe21351a2b55dc45a","title":"Update SETUP.md for packet forwarding architecture","description":"Replace proxy references with packet forwarding, add mobile verification steps, document firewall/security software interactions. Reference docs/SETUP.md","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T16:05:22.492027-08:00","updated_at":"2025-12-16T16:05:22.492027-08:00","source_repo":"."}
{"id":"navisai-4hp","content_hash":"5e98366fdde0f0d5e9805ba7a5d2d40cb6fb3dec951043750cfaf7e3b8a82248","title":"Fix daemon log streaming to SSE endpoint","description":"üìã Governing Documentation:\n- docs/IPC_TRANSPORT.md v0.1 - Section 3.4 'Server-Sent Events'\n- docs/NETWORKING.md v0.3 - Section 5.1 'Log Broadcasting'\n\nISSUE: Daemon logs are not reaching the SSE stream at /logs/stream. The CLI logs command connects but doesn't receive data.\n\nAcceptance Criteria:\n‚úÖ Daemon processes write logs to the SSE endpoint correctly\n‚úÖ CLI can stream real-time logs via SSE\n‚úÖ Log levels (debug, info, warn, error) are properly categorized\n‚úÖ SSE connection handles reconnection gracefully\n‚úÖ All components use @navisai/logging for consistency","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-16T19:37:45.172222-08:00","updated_at":"2025-12-16T20:44:06.748635-08:00","closed_at":"2025-12-16T20:44:06.748635-08:00","source_repo":".","labels":["daemon,logging,critical"]}
{"id":"navisai-4oi","content_hash":"48b46ffc9ba5a47544d947b20b9afa9a59014105212f33cccbe0eed2b0d58bbf","title":"Implement project discovery endpoints","description":"The /api/discovery/scan and /api/discovery/index endpoints are stubbed and return empty results. Need to implement actual project discovery and indexing functionality.\n\nüìã Governing Documentation:\n- docs/DISCOVERY.md v0.1 - Project discovery specifications\n\nImplementation should:\n1. Scan specified directory for NavisAI-compatible projects\n2. Detect project type (React, Next.js, Vue, etc.)\n3. Index project metadata and dependencies\n4. Return structured results\n\nRefs: navisai-001","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-16T23:07:36.805957-08:00","updated_at":"2025-12-16T23:33:29.882468-08:00","closed_at":"2025-12-16T23:33:29.88254-08:00","source_repo":"."}
{"id":"navisai-4wk","content_hash":"54566f662446ad235cf642ba0840500ad4c38e1a2156368923be79550b587561","title":"Verify daemon startup after syntax fix","description":"Test that daemon starts without errors after fixing NavisDaemon class structure\n\nüìã Governing Documentation:\n- docs/SETUP.md - Daemon startup requirements\n- docs/NETWORKING.md - Packet forwarding architecture\n\nTasks:\n1. Run ./navisai up\n2. Check for syntax errors\n3. Verify daemon process is running\n4. Check logs for any runtime errors\n5. Test HTTPS certificate loading","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-17T12:25:41.763196-08:00","updated_at":"2025-12-17T12:25:41.763196-08:00","source_repo":".","labels":["testing,daemon,critical"],"dependencies":[{"issue_id":"navisai-4wk","depends_on_id":"navisai-6qg","type":"blocks","created_at":"2025-12-17T12:25:50.158351-08:00","created_by":"daemon"}]}
{"id":"navisai-4zm","content_hash":"9b855cdfb95498beca7c8f5660ae52742bb5d4383e778cdf434af41f96c631a9","title":"Fix doctor checks wrong pf anchor - should check navisai/proxy not navisai","description":"\nüìã Governing Documentation:\n- docs/NETWORKING.md v0.2 - Section 5.2 (pf rules in navisai/proxy anchor)\n- docs/DOMAIN_BASED_FORWARDING_DESIGN.md (transparent proxy architecture)\n\nISSUE: Doctor command checks for NAT rules in 'navisai' anchor but they're actually in 'navisai/proxy'\n\nCurrent check: sudo pfctl -a navisai -s nat\nShould be: sudo pfctl -a navisai/proxy -s nat\n\nThis causes false negative packet forwarding diagnosis.\n\nAcceptance Criteria:\n‚úÖ Doctor checks correct pf anchor for NAT rules\n‚úÖ Doctor accurately reports packet forwarding status\n‚úÖ No false negatives in diagnostics\n","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-17T00:22:25.899544-08:00","updated_at":"2025-12-17T00:22:25.899544-08:00","source_repo":"."}
{"id":"navisai-50j","content_hash":"b598dbd6d986692d0a2125d6ddfae0d2480e28bdb1ca79cb247f730a399ca5d8","title":"Create Beads templates for NavisAI workflows","description":"Create templates for common NavisAI tasks: bridge implementation, API endpoint additions, documentation updates, high-risk operations","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T14:39:56.986649-08:00","updated_at":"2025-12-16T14:39:56.986649-08:00","source_repo":".","labels":["templates,workflow,automation"]}
{"id":"navisai-50m","content_hash":"8574c21c017d15e086002467e3499e7fc385b3e6ade035b0ab18202e9bc72ee4","title":"Implement Linux systemd service for daemon auto-start","description":"üìã Governing Documentation:\n- docs/SETUP.md v0.2 - Section 2.2 'Linux Setup'\n- docs/NETWORKING.md v0.3 - Section 4.1 'Cross-platform Support'\n\nISSUE: NavisAI has no Linux service installation. Users cannot auto-start daemon on boot.\n\nAcceptance Criteria:\n‚úÖ Create systemd service file for daemon\n‚úÖ Setup script installs service with systemctl\n‚úÖ Service respects user permissions (no root required)\n‚úÖ Service handles restarts gracefully\n‚úÖ Status command works with systemd\n‚úÖ Service integrates with packet forwarding bridge\n‚úÖ Cleanup removes service properly\n‚úÖ Supports both systemd and init.d fallback","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-16T19:49:36.747075-08:00","updated_at":"2025-12-16T19:49:36.747075-08:00","source_repo":".","labels":["linux,systemd,service,setup"]}
{"id":"navisai-5sg","content_hash":"f4fb71ff4e57326a1304e9b3a141b471ba9800a88ac3d61497943301b810c0c8","title":"Implement graceful shutdown and signal handling","description":"üìã Governing Documentation:\n- docs/NETWORKING.md v0.3 - Section 5.3 'Lifecycle Management'\n- docs/SECURITY.md v0.2 - Section 5 'Process Management'\n\nISSUE: Daemon has no signal handlers. SIGTERM/SIGINT cause abrupt termination.\n\nAcceptance Criteria:\n‚úÖ Handle SIGTERM, SIGINT, SIGUSR2 gracefully\n‚úÖ Close all network connections and sockets\n‚úÖ Clean up packet forwarding rules on exit\n‚úÖ Flush pending logs before exit\n‚úÖ Close database connections properly\n‚úÖ Notify connected clients before shutdown\n‚úÖ Wait for in-flight operations to complete\n‚úÖ Support zero-downtime restarts where possible","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-16T19:50:22.507942-08:00","updated_at":"2025-12-16T19:50:22.507942-08:00","source_repo":"."}
{"id":"navisai-5zu","content_hash":"898c5755786fb4a8ff9fa03c8f29efe1910043fa4aeee18b2c9ac947bcb49f2f","title":"Implement workaround for macOS pf rdr localhost limitation - packets from same machine not redirected","description":"\nüìã Governing Documentation:\n- docs/NETWORKING.md v0.2 - Section 5.2 (pf implementation)\n- docs/DOMAIN_BASED_FORWARDING_DESIGN.md (transparent proxy)\n\nISSUE: macOS pf rdr rule doesn't redirect traffic originating from localhost (same machine)\nTest: curl -k https://navis.local from localhost fails with SSL_ERROR\nExpected: Should redirect to transparent proxy on port 8443\n\nCURRENT STATE:\n‚úÖ NAT rules exist: 'rdr pass inet proto tcp from any to any port 443 -\u003e 127.0.0.1 port 8443'\n‚úÖ Transparent proxy listening on port 8443\n‚úÖ mDNS resolves navis.local to 192.168.1.71\n‚ùå localhost connections not redirected (pf limitation)\n\nACCEPTANCE CRITERIA:\n‚úÖ navis.local accessible from external devices on LAN\n‚úÖ localhost can access via direct daemon port (https://127.0.0.1:47621)\n‚úÖ Document pf limitation in NETWORKING.md\n‚úÖ Provide workaround or alternative for local testing\n","status":"open","priority":0,"issue_type":"bug","created_at":"2025-12-17T00:23:51.881219-08:00","updated_at":"2025-12-17T00:23:51.881219-08:00","source_repo":"."}
{"id":"navisai-6qg","content_hash":"5ecebf9babf2c402b14beb1a37ab9b5d782657f7448fd51512a82503e54b9a51","title":"Fix NavisDaemon class structure - methods defined outside class","description":"Critical syntax error preventing daemon startup\n\nüìã Governing Documentation:\n- docs/NETWORKING.md - Core daemon architecture\n- docs/SETUP.md - Daemon startup requirements\n\nThe NavisDaemon class in apps/daemon/daemon.js has a structural issue where methods from setupRoutes() onward (line 325+) are defined outside the class with only 2 spaces indentation instead of 4. This causes a SyntaxError preventing the daemon from starting.\n\nError:\nSyntaxError: Unexpected identifier 'setupRoutes'\n    at line 325 in apps/daemon/daemon.js\n\nImpact:\n- Daemon cannot start\n- https://navis.local not accessible\n- Core Apple-like experience blocked\n\nRoot Cause:\n- Methods have incorrect indentation (2 spaces instead of 4)\n- Class structure broken after initializeServices() method\n\nFix Required:\n- Indent all methods from line 325 onward by 2 additional spaces\n- Ensure class properly closes after stop() method\n- Verify syntax with: node -c apps/daemon/daemon.js","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-17T12:25:28.103933-08:00","updated_at":"2025-12-17T12:33:55.203166-08:00","closed_at":"2025-12-17T12:33:55.203177-08:00","source_repo":".","labels":["daemon,bug,critical,syntax"]}
{"id":"navisai-735","content_hash":"cf105715cfa41b55f0534759b5ef6550d61bda030adce78654811affd7576419","title":"Create emergency stop script for packet forwarding","description":"Handle daemon crashes gracefully, ensure packet forwarding rules don't persist after unexpected shutdown. Create cleanup script that runs on SIGINT/SIGTERM. Reference apps/daemon/src/bridge-packet.js","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-16T16:13:48.633733-08:00","updated_at":"2025-12-16T16:13:48.633733-08:00","source_repo":".","labels":["bridge,reliability,cleanup"]}
{"id":"navisai-7av","content_hash":"10bff93e5cfc45fac3c8c562776676f84702b0abe39931a227a182df6ce55869","title":"Implement log streaming for CLI logs command","description":"CLI logs command shows 'Note: Log streaming not yet implemented'. Need to implement real-time log streaming from daemon to CLI for debugging and monitoring.\n\nCurrent state:\n- CLI logs command exists but shows placeholder message\n- No log streaming mechanism between daemon and CLI\n- Missing real-time log access for debugging\n\nImplementation requirements:\n1. Create log streaming endpoint in daemon (WebSocket or SSE)\n2. Implement CLI client to connect and stream logs\n3. Add log filtering options (level, component, time range)\n4. Handle connection management and reconnection\n5. Add color/formatting for CLI output\n6. Implement log rotation handling\n7. Add tests for log streaming functionality\n\nGoverning docs:\n- docs/SECURITY.md (log access control)\n- @navisai/logging package (shared logging utilities)\n\nThis will enable proper debugging and monitoring capabilities for NavisAI.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-16T17:46:18.923627-08:00","updated_at":"2025-12-16T20:18:04.352711-08:00","closed_at":"2025-12-16T20:18:04.352711-08:00","source_repo":".","labels":["cli,logging,daemon,feature"]}
{"id":"navisai-80a","content_hash":"dd3258f5030ab1a1bb3b633afa114cc986995afbea7ab61b164822994bbea900","title":"Implement certificate management for navis.local","description":"Generate and manage SSL certificates for https://navis.local. Must handle mobile device trust and certificate renewal. Governing docs: docs/NETWORKING.md, docs/SECURITY.md","notes":"Certificate management is already implemented in ssl-manager.js with self-signed certificate generation, SAN support for navis.local/localhost, and OpenSSL fallback.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-16T17:50:32.389774-08:00","updated_at":"2025-12-16T19:02:24.074187-08:00","closed_at":"2025-12-16T19:02:24.074199-08:00","source_repo":".","labels":["security,networking,https,daemon"]}
{"id":"navisai-80l","content_hash":"55bcbd50501186518213615c72adcf648c017a0336b4c8cee959b8b6358ad358","title":"Build PWA and fix raw HTML at /welcome","description":"Currently /welcome shows raw HTML instead of PWA. Need to run 'pnpm --filter @navisai/pwa build' and ensure daemon serves built assets properly. This blocks the entire onboarding flow.","notes":"Fixed /welcome route by removing custom HTML handler that was overriding PWA static files. The PWA build exists and will now serve /welcome correctly through SvelteKit routing.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-16T14:56:48.068568-08:00","updated_at":"2025-12-16T19:05:51.801898-08:00","closed_at":"2025-12-16T19:05:51.80192-08:00","source_repo":".","labels":["critical","pwa","ui"]}
{"id":"navisai-89o","content_hash":"a4a8828d560ccca963f66864977e789278024d5bc48ba3384b8ea011be4105fc","title":"Add dynamic dev server detection and auto-mapping","description":"Implement automatic detection of local development servers and create domain mappings for seamless access without port numbers.\n\nüìã Governing Documentation:\n- docs/DOMAIN_BASED_FORWARDING_DESIGN.md v0.1 - Section 'Dynamic Dev Server Detection'\n\nCore Features:\n1. Monitor common dev server ports (3000, 5173, 8080, etc.)\n2. Detect HTTPS services running on localhost\n3. Automatically map servers to friendly domain names\n4. Watch for process creation/destruction\n5. Monitor workspace for configuration changes\n6. Generate appropriate certificates for mapped domains\n\nDetection Strategy:\n- Port scanning with health checks\n- Process monitoring for common dev tools (Vite, Next.js, etc.)\n- File system watching for package.json and config files\n- Network interface monitoring\n- Integration with IDE/Editor APIs when possible\n\nAuto-Mapping Rules:\n- app.localhost ‚Üí First detected app server\n- api.localhost ‚Üí First detected API server  \n- admin.localhost ‚Üí Admin/dashboard servers\n- \u003cproject\u003e.localhost ‚Üí Project-specific mappings\n- Preserve manual mappings in configuration\n\nAcceptance Criteria:\n- Detects Vite, Next.js, Create React App servers\n- Creates domain mappings automatically\n- Generates valid certificates for mapped domains\n- Updates mappings when servers start/stop\n- Persists manual mappings across restarts\n\nDependencies:\n- Requires navisai-a1p-a (proxy core) to route traffic\n- Integrates with proxy for certificate generation\n\nBlocked By: navisai-a1p-a\nBlocks: navisai-a1p-c (certificate management)","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-16T21:33:26.96467-08:00","updated_at":"2025-12-16T21:59:49.201437-08:00","closed_at":"2025-12-16T21:59:49.201471-08:00","source_repo":".","labels":["detection,automation,mapping,dev-tools"],"dependencies":[{"issue_id":"navisai-89o","depends_on_id":"navisai-a1p","type":"parent-child","created_at":"2025-12-16T21:33:34.325555-08:00","created_by":"daemon"},{"issue_id":"navisai-89o","depends_on_id":"navisai-1bl","type":"blocks","created_at":"2025-12-16T21:33:35.231334-08:00","created_by":"daemon"}]}
{"id":"navisai-a1p","content_hash":"a4e3feb111b8ed1943453877a23ff38333ccbc04ef29a326a71e3cc2c214459e","title":"Implement domain-based packet forwarding for macOS pfctl","description":"Implement comprehensive domain-based packet forwarding system with transparent HTTPS proxy for seamless coexistence with other dev tools\n\nüìã Governing Documentation:\n- docs/DOMAIN_BASED_FORWARDING_DESIGN.md v0.1 - Complete design specification\n- docs/NETWORKING.md v0.2 - Sections 5.1 and 5.2\n\nCritical Update: This is now a P0 critical task as it enables the true Apple-like LAN experience where NavisAI coexists seamlessly with other development tools without port conflicts.\n\nKey Requirements:\n1. Implement transparent HTTPS proxy that inspects TLS SNI\n2. Route navis.local traffic to daemon (127.0.0.1:47621)\n3. Forward all other traffic to original destinations\n4. Auto-detect and map local dev servers\n5. Maintain \u003c5ms latency overhead and \u003e500 Mbps throughput\n6. Generate and manage certificates for intercepted domains\n7. Integrate with existing daemon and CLI workflows\n\nImplementation Phases:\n- Phase 1: Core transparent HTTPS proxy with SNI inspection\n- Phase 2: Dynamic dev server detection and mapping\n- Phase 3: Performance optimization and certificate management\n- Phase 4: CLI integration and comprehensive testing\n\nThis resolves the fundamental conflict where NavisAI currently forwards ALL port 443 traffic, blocking other HTTPS services.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-16T21:20:46.06066-08:00","updated_at":"2025-12-16T23:43:27.619495-08:00","closed_at":"2025-12-16T23:43:27.619495-08:00","source_repo":".","labels":["bridge","components:bridge","macos","networking","packet-forwarding"]}
{"id":"navisai-a48","content_hash":"8d40cb9f55d56a26d8d6c69079baba2d705ecd40484f9e910e779d788ee43ced","title":"Implement packet forwarding bridge in apps/daemon/src/bridge.js","description":"Replace TCP passthrough with packet forwarding manager. Implement Platform Abstraction Layer for pfctl/iptables/netsh. Governed by docs/NETWORKING.md v0.3 and docs/BRIDGE_IMPLEMENTATION.md. This is the core implementation of the hybrid architecture.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-16T14:56:40.765476-08:00","updated_at":"2025-12-16T17:33:01.133495-08:00","closed_at":"2025-12-16T17:33:01.133504-08:00","source_repo":".","labels":["bridge","daemon","high-risk","networking"],"dependencies":[{"issue_id":"navisai-a48","depends_on_id":"navisai-xze","type":"discovered-from","created_at":"2025-12-16T14:56:56.606844-08:00","created_by":"daemon"}]}
{"id":"navisai-a6x","content_hash":"de4eca33e305c4327ea848e167cc9ccf9df3894ec5818fdf59c9bfef4b8d7035","title":"Update ONBOARDING_FLOW.md for packet forwarding","description":"Update onboarding flow to reflect packet forwarding architecture, remove bridge installation mentions (now automatic). Reference docs/ONBOARDING_FLOW.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T16:13:15.049318-08:00","updated_at":"2025-12-16T16:46:55.129263-08:00","closed_at":"2025-12-16T16:46:55.12928-08:00","source_repo":".","labels":["docs,onboarding,ux"]}
{"id":"navisai-bkx","content_hash":"6a1a632dcf4e440ab7eaffd7f7958f18bef1c714b288e85b8db8abe0b5d37d45","title":"Test packet forwarding + mDNS integration end-to-end","description":"Complete integration test: verify navis.local resolves via mDNS, packet forwarding redirects 443‚Üí47621, and https://navis.local serves PWA. Test from multiple devices on LAN.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-16T14:57:18.002809-08:00","updated_at":"2025-12-16T14:57:18.002809-08:00","source_repo":".","labels":["integration","networking","testing"],"dependencies":[{"issue_id":"navisai-bkx","depends_on_id":"navisai-a48","type":"blocks","created_at":"2025-12-16T14:57:24.944216-08:00","created_by":"daemon"},{"issue_id":"navisai-bkx","depends_on_id":"navisai-d0n","type":"blocks","created_at":"2025-12-16T14:57:25.466767-08:00","created_by":"daemon"},{"issue_id":"navisai-bkx","depends_on_id":"navisai-80l","type":"blocks","created_at":"2025-12-16T14:57:26.014843-08:00","created_by":"daemon"}]}
{"id":"navisai-bxh","content_hash":"825869567c7c7bad439ccea8a16171d5eca4227997872c3bcc574451752d5461","title":"Update docs/BEADS_WORKFLOW.md to reference agent guide","description":"Add cross-reference to docs/BEADS_AGENT_GUIDE.md in verification checklist section per AGENTS.md documentation requirements","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T14:44:24.440014-08:00","updated_at":"2025-12-16T18:54:23.087818-08:00","closed_at":"2025-12-16T18:54:23.087843-08:00","source_repo":".","labels":["docs,workflow"]}
{"id":"navisai-c5u","content_hash":"ca8253d60ff37ef95be09b46a5957df371a26629b0f695d9e7d6b47d31a97a24","title":"Implement WebSocket log broadcasting for real-time monitoring","description":"üìã Governing Documentation:\n- docs/IPC_TRANSPORT.md v0.1 - Section 3.3 'WebSocket Events'\n- docs/NETWORKING.md v0.3 - Section 5.2 'Real-time Updates'\n\nISSUE: WebSocket server exists but log broadcasting to connected clients is not implemented. PWA needs real-time logs.\n\nAcceptance Criteria:\n‚úÖ Daemon broadcasts all logs to WebSocket clients\n‚úÖ PWA developer panel displays real-time logs\n‚úÖ CLI can tail logs via WebSocket connection (alternative to SSE)\n‚úÖ Log filtering by level works over WebSocket\n‚úÖ Multiple clients can subscribe simultaneously\n‚úÖ Connection errors are handled gracefully\n‚úÖ Message history maintained for new connections","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-16T19:38:35.664157-08:00","updated_at":"2025-12-16T19:38:35.664157-08:00","source_repo":".","labels":["websocket,logging,pwa,cli"]}
{"id":"navisai-cr6","content_hash":"ef1e8d6d051b147bdd5536d1dea5b28e371103ce5bfd13770c0ce7c366cc9bba","title":"Create comprehensive CLI command documentation","description":"üìã Governing Documentation:\n- docs/README.md - Basic CLI overview\n- Need to create: docs/CLI.md - Complete command reference\n\nISSUE: CLI commands are not fully documented. Users need comprehensive reference for all navisai commands.\n\nAcceptance Criteria:\n‚úÖ Create docs/CLI.md with complete command reference\n‚úÖ Document all options and flags for each command\n‚úÖ Include examples for common use cases\n‚úÖ Document integration with packet forwarding architecture\n‚úÖ Add troubleshooting section for CLI issues\n‚úÖ Update README.md to reference CLI.md\n‚úÖ Include man-page style reference for each command","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T19:46:22.799341-08:00","updated_at":"2025-12-16T19:46:22.799341-08:00","source_repo":".","labels":["cli,documentation"]}
{"id":"navisai-d0n","content_hash":"ffb2b0df5dad1aba03ea4bef960b71165a3a7663324e1858cd87da0a0fe9e0c6","title":"Implement mDNS/Bonjour service advertisement","description":"Add mDNS service registration to daemon. Advertise navis.local -\u003e host IP and _navisai._tcp.local service. Governed by docs/NETWORKING.md v0.3 and MDNS_EXPLAINED.md. Critical for seamless local network access.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-16T14:57:04.44102-08:00","updated_at":"2025-12-16T19:01:41.071778-08:00","closed_at":"2025-12-16T19:01:41.071795-08:00","source_repo":".","labels":["daemon","mobile","networking"]}
{"id":"navisai-fkh","content_hash":"d1553e50056bf3a575138198382a2a39fd6eadf852935e535b8ae4ac23717344","title":"Fix undefined getApprovalHandler method in daemon","description":"\nüìã Governing Documentation:\n- docs/IPC_TRANSPORT.md - API endpoint definitions\n- docs/SECURITY.md v0.2 - Authentication and approval flows\n\nISSUE: Daemon fails to start due to undefined getApprovalHandler method at line 356\n\nREQUIREMENT: All referenced handler methods must be properly implemented\n\nAcceptance Criteria:\n‚úÖ getApprovalHandler method is implemented\n‚úÖ Daemon starts successfully\n‚úÖ Approval endpoints work correctly\n‚úÖ Error is resolved\n","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-17T00:01:11.246492-08:00","updated_at":"2025-12-17T00:03:25.93042-08:00","closed_at":"2025-12-17T00:03:25.93042-08:00","source_repo":"."}
{"id":"navisai-frn","content_hash":"bc6843fb8418deb184275d06c9cca98d5b316f61fc3aa48044c4ef86441f831a","title":"Update PWA base path for /navis/ routing","description":"Configure PWA to work when served from /navis/ path prefix. Required for path-based routing when packet forwarding redirects /navis/* to daemon while /* goes to other services.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-16T14:57:42.000065-08:00","updated_at":"2025-12-16T14:57:42.000065-08:00","source_repo":".","labels":["networking","pwa","ui"]}
{"id":"navisai-gjp","content_hash":"a44d0f99945e6b15e7e76b09eaf7084299e532e36190a08607568dad4894a209","title":"Update SETUP.md for packet forwarding architecture","description":"Replace proxy references with packet forwarding, add mobile verification steps, document firewall/security software interactions. Reference docs/SETUP.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T16:13:09.665253-08:00","updated_at":"2025-12-16T16:46:54.546251-08:00","closed_at":"2025-12-16T16:46:54.546273-08:00","source_repo":".","labels":["docs,setup,ux"]}
{"id":"navisai-h84","content_hash":"65fce4b95fe428158db6edb74f869916fcd765fed66f08a440216969528a6bdf","title":"Strengthen AGENTS.md to enforce Beads as canonical TODO system","description":"Update AGENTS.md to prevent agents from using separate TODO systems\n\nGoverning docs:\n- docs/BEADS_WORKFLOW.md (Beads protocol)\n- CLAUDE.md Section 1.2 (Current Beads rules)\n\nRequired changes:\n1. Add explicit prohibition of TodoWrite tool without Beads references\n2. Add mandatory Beads check before ANY tool usage\n3. Add enforcement: 'Before ANY tool use, first check bd ready'\n4. Add warning examples showing violations\n5. Add Section 1.9 'Tool Usage Protocol' with Beads-first requirement","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T18:36:16.296452-08:00","updated_at":"2025-12-16T18:42:16.494187-08:00","closed_at":"2025-12-16T18:42:16.494224-08:00","source_repo":"."}
{"id":"navisai-hhz","content_hash":"a33048647cacbab16d080cefe20da0d6398150c2014aa5d0fe7fd6c06d59f8d1","title":"Evaluate project state: git, documentation, codebase, beads issues \u0026 next task prioritization","description":"Perform comprehensive evaluation of NavisAI project state including:\n\n1. Git repository analysis - recent commits, branch status, contributor activity\n2. Documentation review - check AGENTS.md, NETWORKING.md, and other critical docs are current\n3. Codebase architecture assessment - verify implemented components vs documented requirements\n4. Beads issues analysis - priority distribution, dependency graph, blocked items\n5. Identify next critical task to work on after evaluation\n\nGoverning documentation:\n- AGENTS.md v1.0 - Project protocol and workflow\n- docs/NETWORKING.md v0.3 - Canonical architecture\n- docs/BEADS_WORKFLOW.md - Task management workflow\n\nThis evaluation will establish current project state and recommend the highest priority next task.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T23:38:57.556802-08:00","updated_at":"2025-12-16T23:41:06.46208-08:00","closed_at":"2025-12-16T23:41:06.46208-08:00","source_repo":".","dependencies":[{"issue_id":"navisai-hhz","depends_on_id":"navisai-a1p","type":"discovered-from","created_at":"2025-12-16T23:40:03.683763-08:00","created_by":"daemon"},{"issue_id":"navisai-hhz","depends_on_id":"navisai-s5s","type":"discovered-from","created_at":"2025-12-16T23:40:08.608348-08:00","created_by":"daemon"}]}
{"id":"navisai-i9r","content_hash":"a2056bc5fd3b71088cd8134bf3d8b05c551ae72bfb199981e6a3a6135ef92928","title":"Implement domain-specific packet forwarding for Windows","description":"üìã Governing Documentation:\n- docs/NETWORKING.md v0.3 - Section 4.1 'Windows Limitations'\n- docs/SECURITY.md v0.2 - Section 3.2 'Windows Security'\n\nISSUE: Windows netsh portproxy forwards ALL port 443 traffic, not domain-specific. This conflicts with other services.\n\nAcceptance Criteria:\n‚úÖ Research Windows packet filtering alternatives\n‚úÖ Implement WinDivert or similar for domain-based filtering\n‚úÖ Fall back to port-based routing if domain filtering not possible\n‚úÖ Clear documentation of Windows limitations\n‚úÖ User prompted about port conflicts on Windows\n‚úÖ Alternative setup method for Windows users\n‚úÖ Test with other HTTPS services running","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-16T19:49:54.019326-08:00","updated_at":"2025-12-16T19:49:54.019326-08:00","source_repo":".","labels":["windows,packet-forwarding,netsh"]}
{"id":"navisai-idr","content_hash":"bb27b0f23ff492b24a2980cbbea7fb6a16125875617a5af3bc9b4725d232b6ff","title":"Complete macOS setup app for Apple-like experience","description":"üìã Governing Documentation:\n- docs/SETUP.md v0.2 - Section 2.1 'macOS Setup'\n- docs/MACOS_SETUP_EXPERIENCE.md - Apple-like onboarding flow\n\nISSUE: Setup app exists but is minimal. macOS users need polished onboarding experience.\n\nAcceptance Criteria:\n‚úÖ Native macOS app with proper UI (not just dialogs)\n‚úÖ Visual indicators for setup progress\n‚úÖ Clean error handling with user-friendly messages\n‚úÖ Animated illustrations for each setup step\n‚úÖ Automatic detection of admin requirements\n‚úÖ One-click certificate trust installation\n‚úÖ Show success screen with next steps\n‚úÖ Handle edge cases gracefully (firewall, etc.)","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-16T19:50:43.442184-08:00","updated_at":"2025-12-16T19:50:43.442184-08:00","source_repo":"."}
{"id":"navisai-iy0","content_hash":"36cf44fce5436908efbd2a55ae2e748614285d04fd7eed0f210e386bb2c6d1ce","title":"Fix /welcome route to serve PWA instead of raw HTML","description":"The daemon has a custom /welcome handler that returns raw HTML, overriding the PWA static files. Need to remove the custom handler when PWA build exists so the SvelteKit welcome route can be served properly. Governing docs: docs/NETWORKING.md, docs/SETUP.md","notes":"Fixed by removing custom /welcome handler that was overriding PWA static files. The daemon now properly serves the built PWA at /welcome.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-16T19:06:18.690294-08:00","updated_at":"2025-12-16T19:06:27.253816-08:00","closed_at":"2025-12-16T19:06:27.253845-08:00","source_repo":"."}
{"id":"navisai-j29","content_hash":"cedfab4f6ea2ec5c9e46732332d216b14baa6fca18a9730362335ce8323df18a","title":"cli-prs: Add real-time pairing status monitoring","description":"The navisai pair command currently doesn't monitor pairing progress in real-time. Implement WebSocket-based real-time pairing status updates to show users when devices connect, accept pairing, or fail.\n\n**Requirements:**\n1. Connect to daemon's WebSocket endpoint after initiating pairing\n2. Listen for pairing-related events (device.connect, device.paired, pairing.failed)\n3. Display status updates in real-time in the CLI\n4. Show QR code that updates with pairing status\n5. Handle timeout scenarios gracefully\n6. Allow cancelling the monitoring with Ctrl+C\n\n**Acceptance Criteria:**\n- [ ] Shows 'Waiting for device...' after pairing starts\n- [ ] Displays real-time updates when device scans QR code\n- [ ] Shows 'Pairing successful!' when device accepts\n- [ ] Shows error messages for failed pairings\n- [ ] Can cancel monitoring with Ctrl+C\n- [ ] Updates every 2 seconds with current status","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-16T15:58:29.519372-08:00","updated_at":"2025-12-16T15:58:29.519372-08:00","source_repo":".","labels":["cli","pairing","ux","websocket"]}
{"id":"navisai-j7m","content_hash":"c036455d8ff8247ec58da9237106a0eb8c45d186ed5392b85aec9917c7777c03","title":"Add e2e integration test for packet forwarding + mDNS","description":"üìã Governing Documentation:\n- docs/NETWORKING.md v0.3 - Section 7 'Testing \u0026 Validation'\n- docs/BEADS_WORKFLOW.md v0.1 - Section 4.2 'Test Requirements'\n\nISSUE: No integration tests verify the complete LAN access flow works together end-to-end.\n\nAcceptance Criteria:\n‚úÖ Test sets up packet forwarding and mDNS service\n‚úÖ Test verifies navis.local resolves from another device\n‚úÖ Test validates HTTPS connection works on port 443\n‚úÖ Test checks PWA loads correctly on mobile\n‚úÖ Test includes cleanup to restore system state\n‚úÖ Test runs on macOS, Linux, and Windows (with variations)\n‚úÖ Test documented in tests/integration/README.md","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-16T19:38:50.853039-08:00","updated_at":"2025-12-16T19:38:50.853039-08:00","source_repo":".","labels":["testing,integration,quality-assurance"]}
{"id":"navisai-jma","content_hash":"d6eebce4ed1c8b78d7121cba6a078230a28f352ad0f59008e04bc23fa4c14d3e","title":"cli-lgs: Implement log streaming in navisai logs command","description":"The navisai logs command currently shows 'Log streaming not yet implemented'. Implement proper log streaming by connecting to the daemon's WebSocket endpoint or tailing the log files.\n\n**Requirements:**\n1. Connect to daemon's WebSocket endpoint at /ws for real-time log events\n2. Or implement file tailing for daemon logs in ~/.navis/logs/\n3. Handle log filtering and formatting for CLI output\n4. Ensure graceful disconnection when user presses Ctrl+C\n5. Test with various log volumes and ensure performance\n\n**Acceptance Criteria:**\n- [ ] 'navisai logs' shows real-time log output\n- [ ] Logs are properly formatted and readable\n- [ ] Can handle high-volume logging without issues\n- [ ] Clean exit on Ctrl+C\n- [ ] Works with both WebSocket and file-based approaches","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T15:58:20.338968-08:00","updated_at":"2025-12-16T19:28:26.640296-08:00","closed_at":"2025-12-16T19:28:26.64031-08:00","source_repo":".","labels":["cli","daemon","logging"]}
{"id":"navisai-jsh","content_hash":"d1ae5b26d02378031f575a68f2b07e063011ec68ec035b378af187914c0b2166","title":"cli-doc: Enhance doctor with packet forwarding diagnostics","description":"The navisai doctor command doesn't verify if packet forwarding rules are active. Add diagnostics to check the actual packet forwarding implementation.\n\n**Requirements:**\n1. Check if bridge-packet.js rules are installed on macOS (pfctl)\n2. Verify iptables rules on Linux\n3. Check netsh portproxy on Windows\n4. Test actual routing from navis.local to daemon:47621\n5. Verify mDNS service record publishing (_navisai._tcp.local)\n6. Show clear PASS/FAIL status for each component\n\n**Acceptance Criteria:**\n- [ ] Shows 'Packet Forwarding: PASS/FAIL' with details\n- [ ] Lists installed rules for the current platform\n- [ ] Verifies domain-based routing works\n- [ ] Checks mDNS service advertisement\n- [ ] Provides remediation steps if tests fail\n- [ ] Works across all supported platforms","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-16T15:58:38.717988-08:00","updated_at":"2025-12-16T19:45:08.188468-08:00","source_repo":".","labels":["cli","diagnostics","packet-forwarding"]}
{"id":"navisai-let","content_hash":"9de2520ac022beaa0697d94b7da184fdfe0438a61c0edd860438efd648783969","title":"Fix pf filter rules for bridge packet forwarding","description":"\nüìã Governing Documentation:\n- docs/NETWORKING.md v0.2 - Section 5.2 'Implementation by Platform'\n- docs/SECURITY.md v0.2 - Packet forwarding security\n\nISSUE: pf NAT rules are loaded but traffic isn't being forwarded. Likely missing filter rules.\n\nREQUIREMENT: Both NAT and filter rules must be properly configured for packet forwarding\n\nAcceptance Criteria:\n‚úÖ Filter rules added to navisai/filter anchor\n‚úÖ Traffic properly forwards from port 443 to 8443\n‚úÖ navis.local accessible via HTTPS\n‚úÖ Bridge service works end-to-end\n","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-17T00:07:21.19756-08:00","updated_at":"2025-12-17T00:10:25.520156-08:00","closed_at":"2025-12-17T00:10:25.520156-08:00","source_repo":"."}
{"id":"navisai-lss","content_hash":"10e615009496ecaebb8eabe7ff74523747ebbd653f168f6302b8107f7bfec15d","title":"Enhance CLI doctor to test packet forwarding","description":"The CLI doctor command only checks if bridge service exists but doesn't verify that packet forwarding is actually working. Need to add tests for:\n\n1. mDNS resolution of navis.local\n2. Packet forwarding from 443 ‚Üí 8443\n3. Transparent proxy functionality\n4. TLS SNI inspection\n\nüìã Governing Documentation:\n- docs/NETWORKING.md v0.3 - Domain-based forwarding\n\nRefs: navisai-003","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T23:07:52.992041-08:00","updated_at":"2025-12-16T23:33:41.705919-08:00","closed_at":"2025-12-16T23:33:41.705955-08:00","source_repo":"."}
{"id":"navisai-m35","content_hash":"d06482242f443ec11a0185499f77e70e58dac70f3ee6a22e03307db9b469e2b0","title":"Verify log streaming works end-to-end","description":"Double verify that the CLI log streaming actually works by testing SSE endpoint and generating logs","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T20:09:08.165052-08:00","updated_at":"2025-12-16T20:18:12.948801-08:00","closed_at":"2025-12-16T20:18:12.948801-08:00","source_repo":"."}
{"id":"navisai-mld","content_hash":"bb0c228dd12b7ba9d1d264864900db6042d35275bb7525655cbe295a580c53d1","title":"Implement WebSocket manager for real-time features","description":"Create WebSocket connection manager for real-time communication per docs/IPC_TRANSPORT.md. Must handle connection lifecycle, reconnection logic, and message queuing. Required for live logs, pairing status, and other real-time features.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-16T17:50:46.975925-08:00","updated_at":"2025-12-16T17:50:46.975925-08:00","source_repo":".","labels":["websocket,daemon,real-time,api"]}
{"id":"navisai-mtp","content_hash":"39d2369ee45faed9ed5d77be3b297a9b4bdc21cbdfaa776ebf170be03200c627","title":"Correct macOS pf implementation details in NETWORKING.md","description":"Update docs/NETWORKING.md to fix macOS pfctl example showing incorrect ALL traffic forwarding instead of domain-based filtering. Document pf limitations and reference navisai-a1p for proper domain-based forwarding implementation.\n\nüìã Governing Documentation:\n- docs/NETWORKING.md v0.2 - Section 5.2 Implementation by Platform\n\nThis corrects the technical inaccuracy in the macOS pfctl example which currently shows forwarding all port 443 traffic instead of implementing true domain-based routing as required by the architecture.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T21:21:47.570602-08:00","updated_at":"2025-12-16T21:22:08.918735-08:00","closed_at":"2025-12-16T21:22:08.918747-08:00","source_repo":"."}
{"id":"navisai-pfd","content_hash":"48a3860fd07e3133de0a563d9a8546df6d516fd13b7b80bc9a3f0381c4c69131","title":"Update SECURITY.md for packet forwarding threat model","description":"Document packet forwarding security model, add mDNS security considerations, update threat model for domain-based forwarding. Reference docs/SECURITY.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T16:13:19.65072-08:00","updated_at":"2025-12-16T16:46:55.82098-08:00","closed_at":"2025-12-16T16:46:55.820994-08:00","source_repo":".","labels":["docs,security"]}
{"id":"navisai-px4","content_hash":"c2bd26b750c2db2f87f1a6a6c1cd63afba2b2ec6ffa79f96bc34f0d899e9ba31","title":"Add cross-platform packet forwarding tests","description":"Create tests for Linux iptables and Windows netsh implementations, verify cleanup scenarios, test edge cases. Reference apps/daemon/src/bridge-packet.js","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T16:13:43.535369-08:00","updated_at":"2025-12-16T16:13:43.535369-08:00","source_repo":".","labels":["tests,bridge,cross-platform"]}
{"id":"navisai-r30","content_hash":"425a04143259f7d0d8a5eced78dcd36f891affb4428208f3f7627665cfc2e7e5","title":"cli-ux: Add progress indicators for long-running operations","description":"Improve UX by adding progress indicators for operations that take time.\n\n**Requirements:**\n1. Show progress bar for project scanning (scan command)\n2. Display indexing progress with file counts\n3. Show pairing progress with time remaining\n4. Add spinner for network operations\n5. Use consistent progress format across commands\n6. Handle success/failure states clearly\n\n**Acceptance Criteria:**\n- [ ] scan command shows files processed/total\n- [ ] index command shows progress bar\n- [ ] setup command shows installation steps\n- [ ] Progress updates every 100ms or 10%\n- [ ] Clear completion status\n- [ ] Works on all platforms (no Unicode issues)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-16T15:59:18.793878-08:00","updated_at":"2025-12-16T15:59:18.793878-08:00","source_repo":".","labels":["cli","progress","ux"]}
{"id":"navisai-s5s","content_hash":"dbe5b1e62c21af7a3c589532b3d8a46a079ba978834c5bac0f1edc0e6e7c3495","title":"Activate packet forwarding bridge for LAN access","description":"üìã Governing Documentation:\n- docs/NETWORKING.md v0.3 - Section 4 'Packet Forwarding Bridge'\n- docs/SETUP.md v0.2 - Section 2.3 'Bridge Installation'\n- docs/SECURITY.md v0.2 - Section 3.1 'Bridge Security'\n\nISSUE: Packet forwarding bridge exists but not activated during setup. Users cannot access navis.local:443 without manual intervention.\n\nREQUIREMENT: Bridge service must handle BOTH packet forwarding AND mDNS for complete LAN access.\n\nAcceptance Criteria:\n‚úÖ Packet forwarding is automatically activated during navisai setup\n‚úÖ Bridge persists across system reboots\n‚úÖ Bridge handles both packet forwarding AND mDNS services\n‚úÖ Cleanup command fully removes bridge rules\n‚úÖ Bridge forwards 443 ‚Üí 47621 for navis.local only\n‚úÖ macOS pfctl rules work properly with pf.conf\n‚úÖ Linux iptables rules are correctly implemented\n‚úÖ Windows netsh forwards traffic (with domain limitation noted)\n‚úÖ mDNS advertisement continues even when daemon is stopped","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-16T19:38:00.390896-08:00","updated_at":"2025-12-17T00:20:13.941473-08:00","source_repo":".","labels":["networking,bridge,setup,critical"]}
{"id":"navisai-snw","content_hash":"732ac22fd68f8117d5e4dad2785848c4e09383933b7ad6f3daaae7db21f16d11","title":"Implement certificate management for multiple domains","description":"Create a comprehensive certificate management system that can generate, store, and serve certificates for multiple domains during TLS interception.\n\nüìã Governing Documentation:\n- docs/DOMAIN_BASED_FORWARDING_DESIGN.md v0.1 - Section 'Certificate Management'\n- docs/SECURITY.md v0.2 - Security requirements for TLS handling\n\nCore Requirements:\n1. Generate unique root CA per NavisAI installation\n2. On-demand certificate generation for any domain\n3. Secure storage of CA private key in system Keychain\n4. Certificate caching with appropriate TTL\n5. Automatic CA trust installation with user consent\n6. Certificate validation for destination connections\n\nImplementation Details:\n- Use Node.js crypto module for certificate generation\n- Implement X.509 certificate parsing and validation\n- Support wildcard certificates (*.localhost)\n- Implement Certificate Revocation List (CRL) support\n- Provide CLI commands for certificate management\n\nSecurity Measures:\n- CA private key encrypted at rest\n- Limited certificate validity (90 days default)\n- Secure random number generation\n- Certificate pinning for navis.local\n- Clear audit trail of all certificate operations\n\nCLI Integration:\n- ./navisai setup --install-ca\n- ./navisai certs list\n- ./navisai certs generate \u003cdomain\u003e\n- ./navisai certs revoke \u003cdomain\u003e\n- ./navisai ca trust --remove\n\nAcceptance Criteria:\n- Generates valid certificates accepted by browsers\n- Securely stores CA private key\n- Auto-trusts CA in system Keychain (macOS)\n- Caches certificates efficiently\n- Validates destination certificates\n- Provides clear error messages for certificate issues\n\nDependencies:\n- Requires navisai-a1p-a (proxy core) to use certificates\n- Requires navisai-a1p-b (dev detection) for domain mappings\n\nBlocked By: navisai-a1p-a, navisai-a1p-b\nBlocks: navisai-a1p-d (performance optimization)","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-16T21:33:49.011082-08:00","updated_at":"2025-12-16T22:03:43.536347-08:00","closed_at":"2025-12-16T22:03:43.536387-08:00","source_repo":".","labels":["certificates,security,tls,crypto"],"dependencies":[{"issue_id":"navisai-snw","depends_on_id":"navisai-a1p","type":"parent-child","created_at":"2025-12-16T21:33:55.26266-08:00","created_by":"daemon"},{"issue_id":"navisai-snw","depends_on_id":"navisai-89o","type":"blocks","created_at":"2025-12-16T21:33:56.061226-08:00","created_by":"daemon"}]}
{"id":"navisai-sz8","content_hash":"edda264df72fdc446d7be07789f00e36bb515c0e1bd9f1bfb18153197f130b4d","title":"Implement PWA project analysis API method","description":"The getProjectAnalysis() method in apps/pwa/src/lib/api/client.ts throws 'Not implemented' error. This breaks the project analysis workflow in the PWA.\n\nüìã Governing Documentation:\n- docs/PWA_WORKFLOW.md v0.1 - Project Analysis Feature\n\nNeed to implement the analysis endpoint and client method to provide project insights, recommendations, and metrics.\n\nRefs: navisai-002","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T23:07:45.234608-08:00","updated_at":"2025-12-16T23:33:36.065377-08:00","closed_at":"2025-12-16T23:33:36.065391-08:00","source_repo":"."}
{"id":"navisai-t2b","content_hash":"676b9476eef6fccda3c8c88c1cce12dc54add56c6e1392bba876fb5bca2ef3d7","title":"daemon-mdns: Ensure mDNS service record publishing","description":"Documentation mentions publishing _navisai._tcp.local service records via Bonjour. Verify and ensure the daemon properly publishes these service records.\n\n**Requirements:**\n1. Check if daemon publishes _navisai._tcp.local PTR record\n2. Verify NavisAI._navisai._tcp.local SRV record points to navis.local:443\n3. Ensure TXT records include version=1 and tls=1\n4. Test service discovery with Bonjour browser tools\n5. Verify on mobile devices (iOS/Android) can discover Navis\n\n**Acceptance Criteria:**\n- [ ] Service records are published on daemon start\n- [ ] Bonjour service discovery tools show NavisAI service\n- [ ] Mobile devices can see NavisAI service\n- [ ] Service updates when daemon restarts\n- [ ] Records have correct TTL (2 hours)\n- [ ] Includes all required TXT entries","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T15:58:48.205869-08:00","updated_at":"2025-12-16T15:58:48.205869-08:00","source_repo":".","labels":["bonjour","daemon","mdns","mobile"]}
{"id":"navisai-v6t","content_hash":"304bbbdb4a523624025815ebf5d1fab6597eb8b5ab2bec2e9ea1f40162267ea9","title":"Evaluate project state: git, documentation, codebase, beads issues \u0026 next task prioritization","description":"Comprehensive evaluation of NavisAI project state including:\n\nüìã Governing Documentation:\n- AGENTS.md v.current (agent protocol \u0026 workflows)\n- docs/NETWORKING.md v0.3 (canonical networking architecture)\n- docs/BEADS_WORKFLOW.md (task tracking system)\n\nüîç Evaluation Areas:\n1. Git status \u0026 recent commits analysis\n2. Documentation currency \u0026 consistency check\n3. Codebase architecture vs documentation compliance\n4. Beads issues prioritization \u0026 dependency analysis\n5. Critical path identification (mDNS implementation, etc.)\n\n‚úÖ Success Criteria:\n- All unblocked P0 tasks identified\n- Dependencies mapped and validated\n- Documentation gaps catalogued\n- Next highest priority task selected for immediate work\n\nThis evaluation will inform the next development cycle and ensure alignment with documented architecture.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T20:38:32.884058-08:00","updated_at":"2025-12-16T20:40:05.765085-08:00","closed_at":"2025-12-16T20:40:05.765085-08:00","source_repo":"."}
{"id":"navisai-vne","content_hash":"a9daa229d5bd926cb731d75d5063d0fdf6f3cfcd74909dcca21df84d8c813ddb","title":"Document packet forwarding troubleshooting in NETWORKING.md","description":"Add troubleshooting section for packet forwarding issues, emergency cleanup procedures, and mDNS service record details (A, AAAA, PTR). Include FAQ for common issues. Reference docs/NETWORKING.md","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T16:05:16.959016-08:00","updated_at":"2025-12-16T16:05:16.959016-08:00","source_repo":"."}
{"id":"navisai-vot","content_hash":"dc72774269345f37d4a83077d4f762fba331656f8606ea82c30e7d49b109c793","title":"Add input validation to all API endpoints","description":"üìã Governing Documentation:\n- docs/SECURITY.md v0.2 - Section 4 'Input Validation'\n- docs/IPC_TRANSPORT.md v0.1 - API endpoint specifications\n\nISSUE: API endpoints lack input validation and sanitization, creating security vulnerabilities.\n\nAcceptance Criteria:\n‚úÖ Add validation schemas for all request bodies\n‚úÖ Validate path parameters and query strings\n‚úÖ Sanitize user inputs to prevent injection\n‚úÖ Return proper error responses for invalid data\n‚úÖ Rate limiting sensitive endpoints\n‚úÖ Audit all endpoints for XSS/SQL injection risks\n‚úÖ Add tests for validation logic","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-16T19:50:11.357611-08:00","updated_at":"2025-12-16T19:50:11.357611-08:00","source_repo":"."}
{"id":"navisai-vvi","content_hash":"c92e9ccffc697e8d636a4d659e07a4b5b33c9827ee7417d810ddb1441147ba85","title":"Test core functionality - navis.local accessibility","description":"Verify https://navis.local is accessible after daemon startup\n\nüìã Governing Documentation:\n- docs/NETWORKING.md - Canonical origin configuration\n- docs/SETUP.md - Setup verification steps\n\nTests:\n1. Test https://navis.local/status endpoint\n2. Verify TLS certificate is valid\n3. Check packet forwarding is working\n4. Test from multiple devices if possible\n5. Verify mDNS resolution (navis.local)","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-17T12:25:57.592056-08:00","updated_at":"2025-12-17T12:25:57.592056-08:00","source_repo":".","labels":["testing,networking,core"],"dependencies":[{"issue_id":"navisai-vvi","depends_on_id":"navisai-4wk","type":"blocks","created_at":"2025-12-17T12:26:02.641387-08:00","created_by":"daemon"}]}
{"id":"navisai-wmu","content_hash":"1a411a2832a6a6d291d43bbe2f9a11caea9fd50ab76e3bd84e1441209d4b602c","title":"Update NETWORKING.md to document macOS pf localhost limitation","description":"\nüìã Governing Documentation:\n- docs/NETWORKING.md v0.2 - Main networking documentation\n- docs/DOMAIN_BASED_FORWARDING_DESIGN.md - Technical design reference\n\nISSUE: macOS pf rdr rules don't redirect traffic originating from localhost (same machine)\nThis causes confusion when testing with curl/localhost connections.\n\nCURRENT BEHAVIOR:\n‚úÖ External LAN devices can access navis.local\n‚úÖ Transparent proxy works for external traffic\n‚ùå curl https://navis.local from localhost fails (pf limitation)\n‚ùå Doctor reports navis.local not reachable\n\nDOCUMENTATION NEEDED:\n1. Add section explaining pf localhost limitation\n2. Clarify that navis.local works for LAN clients, not localhost\n3. Reference debug mode for localhost testing (port 47621)\n4. Link to Beads issue navisai-5zu for workaround details\n\nACCEPTANCE CRITERIA:\n‚úÖ Network section updated with pf limitation note\n‚úÖ Clarifies localhost vs LAN access difference\n‚úÖ Provides guidance for local testing\n‚úÖ References Beads issue navisai-5zu for workaround\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T00:29:21.229629-08:00","updated_at":"2025-12-17T00:29:21.229629-08:00","source_repo":"."}
{"id":"navisai-x2y","content_hash":"a7f52bff4831fc94013820cda96f43bbbbfd4a88e8c8ee99a55c5cfd8dd25e82","title":"Implement test suite to achieve 80% coverage","description":"Project currently lacks test infrastructure. Need to set up testing framework, write unit tests for daemon services, integration tests for API endpoints, and bridge functionality tests. Target: 80% code coverage as required by Section 14 of CLAUDE.md.\n\nGoverning docs:\n- Section 14: Continuous Verification Workflow\n- docs/NETWORKING.md (bridge functionality)\n- docs/IPC_TRANSPORT.md (API endpoints)\n\nCurrent gaps:\n1. No testing framework configured\n2. Zero unit tests for daemon services\n3. No integration tests for API endpoints\n4. Bridge functionality untested\n5. Below 80% coverage requirement\n\nImplementation plan:\n1. Set up Jest/Vitest testing framework\n2. Write unit tests for core daemon services\n3. Add integration tests for all documented API endpoints\n4. Create bridge functionality tests (packet forwarding)\n5. Set up coverage reporting and CI integration\n6. Add test database fixtures and utilities","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-16T17:46:00.725578-08:00","updated_at":"2025-12-16T17:46:00.725578-08:00","source_repo":".","labels":["testing,coverage,daemon,api,bridge"]}
{"id":"navisai-xv8","content_hash":"cdebb9e2ecb36eef4df4e196d95ec44ec835d9f00bf2ec241a79ba4cecb25db1","title":"Document packet forwarding troubleshooting in NETWORKING.md","description":"Add troubleshooting section for packet forwarding issues, emergency cleanup procedures, and mDNS service record details (A, AAAA, PTR). Include FAQ for common issues. Reference docs/NETWORKING.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T16:13:04.148343-08:00","updated_at":"2025-12-16T16:46:47.80435-08:00","closed_at":"2025-12-16T16:46:47.804369-08:00","source_repo":".","labels":["docs,networking,troubleshooting"]}
{"id":"navisai-xw1","content_hash":"bac947e6060083a30cb888940b28043a8695f15f5ac25db5a73b33a8411b78a2","title":"Implement database migration system","description":"üìã Governing Documentation:\n- Need to create docs/DATABASE.md for migration strategy\n- packages/db/ directory exists but has no migration system\n\nISSUE: No database migration system. Schema changes require manual intervention.\n\nAcceptance Criteria:\n‚úÖ Create migration tracking table\n‚úÖ Implement migration runner CLI\n‚úÖ Add migration scripts for current schema\n‚úÖ Support up and down migrations\n‚úÖ Auto-run migrations on daemon start\n‚úÖ Backup database before migrations\n‚úÖ Document migration process in docs/DATABASE.md\n‚úÖ Add tests for migration system","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-16T19:50:31.642652-08:00","updated_at":"2025-12-16T19:50:31.642652-08:00","source_repo":"."}
{"id":"navisai-xze","content_hash":"1e234b36cb6dd7650923276eeb93af6712544f2289287f20ce6c8e213f2167ed","title":"Research packet forwarding implementation","description":"Research platform-specific packet forwarding implementation to replace TCP passthrough bridge. Governed by docs/NETWORKING.md v0.3. Need to understand pfctl (macOS), iptables (Linux), and netsh (Windows) command structures and requirements.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-16T14:56:34.199757-08:00","updated_at":"2025-12-16T18:47:09.643272-08:00","closed_at":"2025-12-16T18:47:09.64328-08:00","source_repo":".","labels":["bridge","daemon","networking"]}
{"id":"navisai-zgt","content_hash":"dd78a0b3280446d0ec768c80ba4e45a8e58dbc25a7959b1b45866d611abb64b4","title":"Implement system-wide mDNS service for navis.local","description":"üìã Governing Documentation:\n- docs/NETWORKING.md v0.3 - Section 4.2 'mDNS Service Advertisement'\n- docs/SETUP.md v0.2 - Section 2.4 'mDNS Registration'\n- docs/SECURITY.md v0.2 - Section 2.1 'LAN Name Security'\n\nISSUE: mDNS service exists (navisai-d0n completed) but navis.local doesn't resolve system-wide on all devices. Currently mDNS runs in daemon process and stops when daemon stops.\n\nREQUIREMENT: Move mDNS functionality from daemon to bridge service so it persists independently.\n\nAcceptance Criteria:\n‚úÖ Move mDNS code from daemon.js to bridge.js\n‚úÖ mDNS service advertises navis.local to all LAN devices\n‚úÖ Service starts during navisai setup and persists\n‚úÖ Service runs independently of daemon lifecycle\n‚úÖ Service automatically updates with current IP address\n‚úÖ Mobile devices (iOS/Android) can resolve navis.local\n‚úÖ Multiple network interfaces handled correctly\n‚úÖ Service respects privacy and doesn't expose beyond LAN","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-16T19:38:18.867604-08:00","updated_at":"2025-12-16T21:02:35.520168-08:00","closed_at":"2025-12-16T21:02:35.520168-08:00","source_repo":".","labels":["networking,mdns,discovery,critical"]}
{"id":"navisai-zjh","content_hash":"be8589ffc067e6cee6f6def7154a4cf2e588312b6390b7d3960725b68dec1c25","title":"Fix bridge permission issue - write pf conf to proper location","description":"\nüìã Governing Documentation:\n- docs/NETWORKING.md v0.2 - Section 5.2 'Implementation by Platform'\n- docs/SECURITY.md - Service permissions and sandboxing\n\nISSUE: Bridge fails to start when run as LaunchDaemon due to permission error writing to /tmp\n\nREQUIREMENT: Bridge must write pf configuration to a location accessible by LaunchDaemons\n\nAcceptance Criteria:\n‚úÖ Bridge uses /var/tmp or private/tmp instead of /tmp\n‚úÖ Bridge successfully starts as LaunchDaemon\n‚úÖ pf rules are properly loaded\n‚úÖ Bridge persists across reboots\n","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-16T23:58:11.761658-08:00","updated_at":"2025-12-16T23:58:34.668963-08:00","closed_at":"2025-12-16T23:58:34.668963-08:00","source_repo":"."}
{"id":"navisai-zjt","content_hash":"c75602a51d20ec49d4b05bade38a66e9ed15fb30165b192d8ca046a266085662","title":"Configure Claude Code hooks for Beads","description":"Set up bd setup claude --project to integrate with Claude Code for automatic context loading and session management","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T14:39:35.364352-08:00","updated_at":"2025-12-16T18:54:09.333178-08:00","closed_at":"2025-12-16T18:54:09.333194-08:00","source_repo":".","labels":["claude,automation,integration"],"dependencies":[{"issue_id":"navisai-zjt","depends_on_id":"navisai-22h","type":"blocks","created_at":"2025-12-16T14:40:07.842204-08:00","created_by":"daemon"}]}
{"id":"navisai-zs3","content_hash":"5d9945b8c6f2299c939c095d989bdc5f7604e3bee071801545ec5d10e8deeea5","title":"Implement missing security middleware (helmet, cors, rate limiting)","description":"Security evaluation revealed missing security middleware. IPC_TRANSPORT.md specifies CORS rules but no implementation found. Need to add helmet.js for security headers, proper CORS configuration, and rate limiting to protect endpoints. This is critical for production security.\n\nGoverning docs:\n- docs/SECURITY.md (security requirements)\n- docs/IPC_TRANSPORT.md (CORS specifications)\n\nCritical security gaps identified:\n1. No helmet.js implementation for security headers\n2. CORS rules documented but not implemented in daemon.js\n3. No rate limiting protection for endpoints\n4. Missing security middleware stack","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-16T18:12:34.226335-08:00","updated_at":"2025-12-16T18:35:14.434403-08:00","closed_at":"2025-12-16T18:35:14.434413-08:00","source_repo":"."}
{"id":"navisai-zt9","content_hash":"9bb81d125e6a20825e69a0d3d5719bcf5ad9c4b02310e495283fb16fda42550a","title":"daemon-ws: Add log events over WebSocket","description":"To support real-time log streaming in the CLI, implement log events that are sent over the WebSocket connection.\n\n**Requirements:**\n1. Add 'log' event type to WebSocket message types\n2. Stream log entries as they are written to file/console\n3. Include log level, timestamp, and message\n4. Buffer logs for WebSocket clients that connect late\n5. Allow filtering by log level via query params\n6. Rate limit to prevent flooding\n\n**Acceptance Criteria:**\n- [ ] Log events are emitted over WebSocket\n- [ ] CLI receives real-time log updates\n- [ ] Each log entry includes level, timestamp, message\n- [ ] Recent logs are buffered for new connections\n- [ ] Log level filtering works (e.g., ?level=error)\n- [ ] No performance impact on daemon operation","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T15:59:06.504419-08:00","updated_at":"2025-12-16T15:59:06.504419-08:00","source_repo":".","labels":["daemon","logging","real-time","websocket"]}
